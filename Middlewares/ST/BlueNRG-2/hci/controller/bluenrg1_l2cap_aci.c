/**
  ******************************************************************************
  * @file    bluenrg1_l2cap_aci.c
  * @author  AMG - RF Application team
  * @brief   Source file for external uC - BlueNRG-x in network coprocessor mode
  *          (l2cap_aci)
  *          Autogenerated files, do not edit!!
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2024 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
#include "ble_types.h"
#include "bluenrg1_l2cap_aci.h"
ble_status_t aci_l2cap_connection_parameter_update_req(uint16_t connection_handle,
                                                       uint16_t conn_interval_min,
                                                       uint16_t conn_interval_max,
                                                       uint16_t slave_latency,
                                                       uint16_t timeout_multiplier)
{
  struct hci_request rq_t;
  uint8_t cmd_buffer[258];
  aci_l2cap_connection_parameter_update_req_cp0 *cp0 = (aci_l2cap_connection_parameter_update_req_cp0 *)(cmd_buffer);
  ble_status_t status = 0;
  uint8_t index_input = 0;
  cp0->connection_handle = HTOB(connection_handle, 2);
  index_input += 2;
  cp0->conn_interval_min = HTOB(conn_interval_min, 2);
  index_input += 2;
  cp0->conn_interval_max = HTOB(conn_interval_max, 2);
  index_input += 2;
  cp0->slave_latency = HTOB(slave_latency, 2);
  index_input += 2;
  cp0->timeout_multiplier = HTOB(timeout_multiplier, 2);
  index_input += 2;
  BLUENRG_MEMSET(&rq_t, 0, sizeof(rq_t));
  rq_t.ogf = 0x3f;
  rq_t.ocf = 0x181;
  rq_t.event = 0x0F;
  rq_t.cparam = cmd_buffer;
  rq_t.command_len = index_input;
  rq_t.rparam = &status;
  rq_t.rlen = 1;
  if (hci_send_req(&rq_t, FALSE) < 0)
  {
    return BLE_STATUS_TIMEOUT;
  }
  if (status)
  {
    return status;
  }
  return BLE_STATUS_SUCCESS;
}
ble_status_t aci_l2cap_connection_parameter_update_resp(uint16_t connection_handle,
                                                        uint16_t conn_interval_min,
                                                        uint16_t conn_interval_max,
                                                        uint16_t slave_latency,
                                                        uint16_t timeout_multiplier,
                                                        uint16_t minimum_ce_length,
                                                        uint16_t maximum_ce_length,
                                                        uint8_t identifier,
                                                        uint8_t accept)
{
  struct hci_request rq_t;
  uint8_t cmd_buffer[258];
  aci_l2cap_connection_parameter_update_resp_cp0 *cp0 = (aci_l2cap_connection_parameter_update_resp_cp0 *)(cmd_buffer);
  ble_status_t status = 0;
  uint8_t index_input = 0;
  cp0->connection_handle = HTOB(connection_handle, 2);
  index_input += 2;
  cp0->conn_interval_min = HTOB(conn_interval_min, 2);
  index_input += 2;
  cp0->conn_interval_max = HTOB(conn_interval_max, 2);
  index_input += 2;
  cp0->slave_latency = HTOB(slave_latency, 2);
  index_input += 2;
  cp0->timeout_multiplier = HTOB(timeout_multiplier, 2);
  index_input += 2;
  cp0->minimum_ce_length = HTOB(minimum_ce_length, 2);
  index_input += 2;
  cp0->maximum_ce_length = HTOB(maximum_ce_length, 2);
  index_input += 2;
  cp0->identifier = HTOB(identifier, 1);
  index_input += 1;
  cp0->accept = HTOB(accept, 1);
  index_input += 1;
  BLUENRG_MEMSET(&rq_t, 0, sizeof(rq_t));
  rq_t.ogf = 0x3f;
  rq_t.ocf = 0x182;
  rq_t.cparam = cmd_buffer;
  rq_t.command_len = index_input;
  rq_t.rparam = &status;
  rq_t.rlen = 1;
  if (hci_send_req(&rq_t, FALSE) < 0)
  {
    return BLE_STATUS_TIMEOUT;
  }
  if (status)
  {
    return status;
  }
  return BLE_STATUS_SUCCESS;
}

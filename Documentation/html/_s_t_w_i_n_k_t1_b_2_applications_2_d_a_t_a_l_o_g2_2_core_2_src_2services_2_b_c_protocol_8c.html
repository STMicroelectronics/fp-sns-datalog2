<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FP-SNS-DATALOG2: Projects/STWINKT1B/Applications/DATALOG2/Core/Src/services/BCProtocol.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FP-SNS-DATALOG2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7a6499598ddcfcabe96e224cb4a6d834.html">Projects</a></li><li class="navelem"><a class="el" href="dir_f222a017b1c79aa15971e29ce2b5c21a.html">STWINKT1B</a></li><li class="navelem"><a class="el" href="dir_5a26bc6de70a5318394f19e00dadc5b4.html">Applications</a></li><li class="navelem"><a class="el" href="dir_1b091cc4a831f9df1a786ef52014db3b.html">DATALOG2</a></li><li class="navelem"><a class="el" href="dir_c30474420b45ede8142b8b84922e6193.html">Core</a></li><li class="navelem"><a class="el" href="dir_8ac6a0f16596d823decf0da64dbb3fdc.html">Src</a></li><li class="navelem"><a class="el" href="dir_6c0ade17bcb6a33496e3e74184d02a2e.html">services</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">BCProtocol.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>STBC02 Battery Charger service.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;services/BCProtocol.h&quot;</code><br />
<code>#include &quot;drivers/BCTimerDriver.h&quot;</code><br />
<code>#include &quot;drivers/BCTimChgDriver.h&quot;</code><br />
<code>#include &quot;drivers/BCAdcDriver.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sysmem_8h_source.html">services/sysmem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sysdebug_8h_source.html">services/sysdebug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="syscs_8h_source.html">services/syscs.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___tim_callbakc_map_entry__t.html">_TimCallbakcMapEntry_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_t_b_c02___chg_state_info__t.html">_STBC02_ChgStateInfo_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device state structure info.  <a href="struct___s_t_b_c02___chg_state_info__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8f5e321e719dcc5a8c502faefb10a564"><td class="memItemLeft" align="right" valign="top"><a id="a8f5e321e719dcc5a8c502faefb10a564"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SYS_DEBUGF</b>(level,  message)&#160;&#160;&#160;SYS_DEBUGF3(<a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2sysdebug__config_8h.html#ac1cf06d1ff5876d18bf11580cb981738">SYS_DBG_BCP</a>, level, message)</td></tr>
<tr class="separator:a8f5e321e719dcc5a8c502faefb10a564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d716378c78ecc0f5692524eff0a228"><td class="memItemLeft" align="right" valign="top"><a id="a01d716378c78ecc0f5692524eff0a228"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BC_STBC02_SW_START_PULSE_US</b>&#160;&#160;&#160;360U</td></tr>
<tr class="separator:a01d716378c78ecc0f5692524eff0a228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdac53be4b392850b305e8f31ec3cd3f"><td class="memItemLeft" align="right" valign="top"><a id="acdac53be4b392850b305e8f31ec3cd3f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BC_STBC02_SW_SHORT_PULSE_US</b>&#160;&#160;&#160;105U</td></tr>
<tr class="separator:acdac53be4b392850b305e8f31ec3cd3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63cd3c22bb2564149c938c7874ba3b9"><td class="memItemLeft" align="right" valign="top"><a id="aa63cd3c22bb2564149c938c7874ba3b9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BC_STBC02_SW_STOP_PULSE_US</b>&#160;&#160;&#160;505U</td></tr>
<tr class="separator:aa63cd3c22bb2564149c938c7874ba3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb7b6817c0fd5c50770616680dc84456"><td class="memItemLeft" align="right" valign="top"><a id="adb7b6817c0fd5c50770616680dc84456"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BC_CHG_TIM_COUNTING_FREQ</b>&#160;&#160;&#160;10000U</td></tr>
<tr class="separator:adb7b6817c0fd5c50770616680dc84456"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a07621a6d8153d14f0287c38ade095b46"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___tim_callbakc_map_entry__t.html">_TimCallbakcMapEntry_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a07621a6d8153d14f0287c38ade095b46">TimCallbackMapEntry_t</a></td></tr>
<tr class="separator:a07621a6d8153d14f0287c38ade095b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a809fbe11434eaecc2327910197eb5742"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a809fbe11434eaecc2327910197eb5742">BCP1WStateMachine</a> (TIM_HandleTypeDef *htim)</td></tr>
<tr class="separator:a809fbe11434eaecc2327910197eb5742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe83ea91a846174b14dfde049941970a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#afe83ea91a846174b14dfde049941970a">BCPComputeFrequency</a> (TIM_HandleTypeDef *htim)</td></tr>
<tr class="separator:afe83ea91a846174b14dfde049941970a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4faa18d6305cc7ef585d883c3410b141"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a4faa18d6305cc7ef585d883c3410b141">BCPFreq2Status</a> (float freq)</td></tr>
<tr class="memdesc:a4faa18d6305cc7ef585d883c3410b141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the status of the STBC02 checking the toggling frequency of the charging pin of the STBC02.  <a href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a4faa18d6305cc7ef585d883c3410b141">More...</a><br /></td></tr>
<tr class="separator:a4faa18d6305cc7ef585d883c3410b141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac357ea8529c1155dd7f96c7469635b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a8ac357ea8529c1155dd7f96c7469635b">BCPAlloc</a> (void)</td></tr>
<tr class="separator:a8ac357ea8529c1155dd7f96c7469635b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85973fb8b2a03cdb439b74946d9c55bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a85973fb8b2a03cdb439b74946d9c55bf">BCPInit</a> (<a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *_this, <a class="el" href="_i_driver_8h.html#af510b3df23076a172ebd286865cc28e9">IDriver</a> *p_bc_tim_sw_driver, <a class="el" href="_i_driver_8h.html#af510b3df23076a172ebd286865cc28e9">IDriver</a> *p_bc_tim_chg_driver, <a class="el" href="_i_driver_8h.html#af510b3df23076a172ebd286865cc28e9">IDriver</a> *p_bc_adc_driver)</td></tr>
<tr class="separator:a85973fb8b2a03cdb439b74946d9c55bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada810684caf6e8412ee16b0b744ad787"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#ada810684caf6e8412ee16b0b744ad787">BCPSendCmd</a> (<a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *_this, <a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a4b17aa0009ee8d56fc2a7d03b5d70faa">ESTBC02_SW_CMD_t</a> cmd)</td></tr>
<tr class="separator:ada810684caf6e8412ee16b0b744ad787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24bc1ddb5743c5a70bb610da7c16806d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a24bc1ddb5743c5a70bb610da7c16806d">BCPPowerOff</a> (<a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *_this)</td></tr>
<tr class="separator:a24bc1ddb5743c5a70bb610da7c16806d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a510ec9b855fa1101c5ed9bf1b0c1ea18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a510ec9b855fa1101c5ed9bf1b0c1ea18">BCPAcquireBatteryVoltage</a> (<a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *_this, uint16_t *voltage)</td></tr>
<tr class="separator:a510ec9b855fa1101c5ed9bf1b0c1ea18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea83fe8875e0b3f3f3fd196f6280d6cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#aea83fe8875e0b3f3f3fd196f6280d6cd">BCPAcquireState</a> (<a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *_this, uint16_t *voltage, <a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a1889cacd0cf77e780b9e67d8664eb0c3">ESTBC02_STATE_t</a> *state)</td></tr>
<tr class="separator:aea83fe8875e0b3f3f3fd196f6280d6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad67547e42003353ef0dacfdee1928d64"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a07621a6d8153d14f0287c38ade095b46">TimCallbackMapEntry_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>sTimCallbackMap</b> [1U]</td></tr>
<tr class="separator:ad67547e42003353ef0dacfdee1928d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2675a977f815e5587b5656dd2c02c340"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="struct___s_t_b_c02___chg_state_info__t.html">_STBC02_ChgStateInfo_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a2675a977f815e5587b5656dd2c02c340">sSTBC02_ChgStateInfo</a> []</td></tr>
<tr class="memdesc:a2675a977f815e5587b5656dd2c02c340"><td class="mdescLeft">&#160;</td><td class="mdescRight">STBC02 status name and related toggling frequency (in Hz) of the nCHG pin.  <a href="_s_t_w_i_n_k_t1_b_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a2675a977f815e5587b5656dd2c02c340">More...</a><br /></td></tr>
<tr class="separator:a2675a977f815e5587b5656dd2c02c340"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>STBC02 Battery Charger service. </p>
<dl class="section author"><dt>Author</dt><dd>STMicroelectronics </dd></dl>
<dl class="section version"><dt>Version</dt><dd>2.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>July 25, 2022</dd></dl>
<p>@description This file implements the needed logic to support the STBC02 Battery Charger.</p>
<p>For more information look at the BCProtocol.h file.</p>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>Copyright (c) 2022 STMicroelectronics All rights reserved.</p>
<p>This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-IS. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a07621a6d8153d14f0287c38ade095b46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07621a6d8153d14f0287c38ade095b46">&#9670;&nbsp;</a></span>TimCallbackMapEntry_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___tim_callbakc_map_entry__t.html">_TimCallbakcMapEntry_t</a> <a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a07621a6d8153d14f0287c38ade095b46">TimCallbackMapEntry_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a why to link a HAL TIM callback to the protocol object that is using the timer. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a809fbe11434eaecc2327910197eb5742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a809fbe11434eaecc2327910197eb5742">&#9670;&nbsp;</a></span>BCP1WStateMachine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void BCP1WStateMachine </td>
          <td>(</td>
          <td class="paramtype">TIM_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>htim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TIM Elapsed Callback function. State Machine for Single Wire protocol implementation (STBC02)</p>
<div class="fragment"><div class="line">  Start  ...... N Pulses .......    Stop</div>
<div class="line">   ____    __    __    __    __    ______</div>
<div class="line">  |    |  |  |  |  |  |  |  |  |  |      |</div>
<div class="line">  |    |  |  |  |  |  |  |  |  |  |      |</div>
<div class="line">__|    |__|  |__|  |__|  |__|  |__|      |__</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">htim</td><td>[IN] specifies the hardware timer that has triggered the ISR. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a510ec9b855fa1101c5ed9bf1b0c1ea18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a510ec9b855fa1101c5ed9bf1b0c1ea18">&#9670;&nbsp;</a></span>BCPAcquireBatteryVoltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> BCPAcquireBatteryVoltage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *&#160;</td>
          <td class="paramname"><em>_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>voltage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquire the rechargeable battery voltage by the ADC</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_this</td><td>[IN] specifies a pointer to the protocol object. </td></tr>
    <tr><td class="paramname">voltage</td><td>[IN] specifies a pointer to the voltage variable<ul>
<li></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_NO_ERROR_CODE if success </dd></dl>

</div>
</div>
<a id="aea83fe8875e0b3f3f3fd196f6280d6cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea83fe8875e0b3f3f3fd196f6280d6cd">&#9670;&nbsp;</a></span>BCPAcquireState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> BCPAcquireState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *&#160;</td>
          <td class="paramname"><em>_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>voltage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a1889cacd0cf77e780b9e67d8664eb0c3">ESTBC02_STATE_t</a> *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquire the STBC02 charging state</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_this</td><td>[IN] specifies a pointer to the protocol object. </td></tr>
    <tr><td class="paramname">voltage</td><td>[IN] specifies a pointer to the rechargeable battery state </td></tr>
    <tr><td class="paramname">state</td><td>[IN] specifies a pointer to the STBC02 state <pre class="fragment">         -
</pre> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_NO_ERROR_CODE if success </dd></dl>

</div>
</div>
<a id="a8ac357ea8529c1155dd7f96c7469635b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ac357ea8529c1155dd7f96c7469635b">&#9670;&nbsp;</a></span>BCPAlloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a>* BCPAlloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate an instance of <a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a>. The protocol object is allocated in the FreeRTOS heap.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the new object <a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> if success, or NULL if out of memory error occurs. </dd></dl>

</div>
</div>
<a id="afe83ea91a846174b14dfde049941970a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe83ea91a846174b14dfde049941970a">&#9670;&nbsp;</a></span>BCPComputeFrequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void BCPComputeFrequency </td>
          <td>(</td>
          <td class="paramtype">TIM_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>htim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TIM Capture Callback function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">htim</td><td>[IN] specifies the hardware timer that has triggered the ISR. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4faa18d6305cc7ef585d883c3410b141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4faa18d6305cc7ef585d883c3410b141">&#9670;&nbsp;</a></span>BCPFreq2Status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void BCPFreq2Status </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the status of the STBC02 checking the toggling frequency of the charging pin of the STBC02. </p>
<p>Compute the Status from the frequency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq</td><td>[IN] CHG pin toggling frequency.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a85973fb8b2a03cdb439b74946d9c55bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85973fb8b2a03cdb439b74946d9c55bf">&#9670;&nbsp;</a></span>BCPInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> BCPInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *&#160;</td>
          <td class="paramname"><em>_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_i_driver_8h.html#af510b3df23076a172ebd286865cc28e9">IDriver</a> *&#160;</td>
          <td class="paramname"><em>p_bc_tim_sw_driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_i_driver_8h.html#af510b3df23076a172ebd286865cc28e9">IDriver</a> *&#160;</td>
          <td class="paramname"><em>p_bc_tim_chg_driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_i_driver_8h.html#af510b3df23076a172ebd286865cc28e9">IDriver</a> *&#160;</td>
          <td class="paramname"><em>p_bc_adc_driver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the protocol object. It must be called after the object allocation and before using it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_this</td><td>[IN] specifies a pointer to the protocol object. </td></tr>
    <tr><td class="paramname">p_bc_driver</td><td>[IN] specifies a ::BCDriver_t object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_NO_ERROR_CODE if success, an error code otherwise. </dd></dl>

</div>
</div>
<a id="a24bc1ddb5743c5a70bb610da7c16806d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24bc1ddb5743c5a70bb610da7c16806d">&#9670;&nbsp;</a></span>BCPPowerOff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> BCPPowerOff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *&#160;</td>
          <td class="paramname"><em>_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends the command E_SHIPPING_MODE_ON to power off the battery charger.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_this</td><td>[IN] specifies a pointer to the protocol object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_NO_ERROR_CODE if success, an error code otherwise. </dd></dl>

</div>
</div>
<a id="ada810684caf6e8412ee16b0b744ad787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada810684caf6e8412ee16b0b744ad787">&#9670;&nbsp;</a></span>BCPSendCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> BCPSendCmd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a3be9a44ea3974c3753d1d6f4e70e2104">BCProtocol_t</a> *&#160;</td>
          <td class="paramname"><em>_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_inc_2services_2_b_c_protocol_8h.html#a4b17aa0009ee8d56fc2a7d03b5d70faa">ESTBC02_SW_CMD_t</a>&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send a command over the 1-wire channel to STBC02</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_this</td><td>[IN] specifies a pointer to the protocol object. </td></tr>
    <tr><td class="paramname">cmd</td><td>[IN] specifies a command. Supported commands are:<ul>
<li></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_NO_ERROR_CODE if success, SYS_BC_CMD_NOT_SUPPORTED otherwise </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2675a977f815e5587b5656dd2c02c340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2675a977f815e5587b5656dd2c02c340">&#9670;&nbsp;</a></span>sSTBC02_ChgStateInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct___s_t_b_c02___chg_state_info__t.html">_STBC02_ChgStateInfo_t</a> sSTBC02_ChgStateInfo[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line"> {NOT_VALID_INPUT, <span class="stringliteral">&quot;Not Valid Input&quot;</span>, 0.0},</div>
<div class="line"> {VALID_INPUT, <span class="stringliteral">&quot;Valid Input&quot;</span>, 0.0},</div>
<div class="line"> {VBAT_LOW, <span class="stringliteral">&quot;Vbat Low&quot;</span>, 0.0},</div>
<div class="line"> {END_OF_CHARGE, <span class="stringliteral">&quot;End Of Charge&quot;</span>, 4.1},</div>
<div class="line"> {CHARGING_PHASE, <span class="stringliteral">&quot;Charging Phase&quot;</span>, 6.2},</div>
<div class="line"> {OVERCHARGE_FAULT, <span class="stringliteral">&quot;Overcharge Fault&quot;</span>, 8.2},</div>
<div class="line"> {CHARGING_TIMEOUT, <span class="stringliteral">&quot;Charging Timeout&quot;</span>, 10.2},</div>
<div class="line"> {BATTERY_VOLTAGE_BE_LOW_VPRE, <span class="stringliteral">&quot;Battery Voltage Below Vpre&quot;</span>, 12.8},</div>
<div class="line"> {CHARGING_THERMAL_LIMITATION, <span class="stringliteral">&quot;Charging Thermal Limitation&quot;</span>, 14.2},</div>
<div class="line"> {BATTERY_TEMPERATURE_FAULT, <span class="stringliteral">&quot;Battery Temperature Fault&quot;</span>, 16.2},</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>STBC02 status name and related toggling frequency (in Hz) of the nCHG pin. </p>
<dl class="section note"><dt>Note</dt><dd>The sequence must respect the order of ESTBC02_STATE_t </dd></dl>

</div>
</div>
<a id="ad67547e42003353ef0dacfdee1928d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad67547e42003353ef0dacfdee1928d64">&#9670;&nbsp;</a></span>sTimCallbackMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_t_8box_p_r_o_2_applications_2_d_a_t_a_l_o_g2_2_core_2_src_2services_2_b_c_protocol_8c.html#a07621a6d8153d14f0287c38ade095b46">TimCallbackMapEntry_t</a> sTimCallbackMap[1U]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    {NULL}</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 3 2023 17:27:33 for FP-SNS-DATALOG2 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>

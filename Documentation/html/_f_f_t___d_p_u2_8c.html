<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FP-SNS-DATALOG2: Projects/eLooM_Components/DPU/Src/FFT_DPU2.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FP-SNS-DATALOG2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_f_f_t___d_p_u2_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">FFT_DPU2.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><br  />
  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_f_f_t___d_p_u2_8h_source.html">FFT_DPU2.h</a>&quot;</code><br />
<code>#include &quot;FFT_DPU2_vtbl.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sysdebug_8h_source.html">services/sysdebug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fft_8h_source.html">fft.h</a>&quot;</code><br />
</div>
<p><a href="_f_f_t___d_p_u2_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___f_f_t___d_p_u2_class.html">_FFT_DPU2Class</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___f_f_t___d_p_u2__t.html">_FFT_DPU2_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a71c0a557e8b6b414ca7f33219a5afbdf" id="r_a71c0a557e8b6b414ca7f33219a5afbdf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#a71c0a557e8b6b414ca7f33219a5afbdf">FFT_COMPUTE_AVG_SCALE_FACTOR</a>(avg_cnt,  fft_len)&#160;&#160;&#160;(( 2.0f ) / (((float)avg_cnt) * ((float)fft_len)))</td></tr>
<tr class="separator:a71c0a557e8b6b414ca7f33219a5afbdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a92343f0b0706d2a94833754a83934c88" id="r_a92343f0b0706d2a94833754a83934c88"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___f_f_t___d_p_u2_class.html">_FFT_DPU2Class</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#a92343f0b0706d2a94833754a83934c88">FFT_DPU2Class</a></td></tr>
<tr class="separator:a92343f0b0706d2a94833754a83934c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:affbe2089caee36a68d41d7c135de84d3" id="r_affbe2089caee36a68d41d7c135de84d3"><td class="memItemLeft" align="right" valign="top">static FFT_error_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#affbe2089caee36a68d41d7c135de84d3">FFT_compute_avg_output</a> (<a class="el" href="_f_f_t___d_p_u2_8h.html#af1ac6ea1a0fcd9587a2acc01c44aefae">FFT_DPU2_t</a> *const pObj)</td></tr>
<tr class="separator:affbe2089caee36a68d41d7c135de84d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3988943b9adad9f35027a5eb9e30d3ba" id="r_a3988943b9adad9f35027a5eb9e30d3ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_i_d_p_u2_8h.html#a28b7a8143eb954781059edc488fd8f54">IDPU2_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#a3988943b9adad9f35027a5eb9e30d3ba">FFT_DPU2Alloc</a> (void)</td></tr>
<tr class="separator:a3988943b9adad9f35027a5eb9e30d3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa827a562d3dd1696227af9b1d10fcc1c" id="r_aa827a562d3dd1696227af9b1d10fcc1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#aa827a562d3dd1696227af9b1d10fcc1c">FFT_DPU2Init</a> (<a class="el" href="_f_f_t___d_p_u2_8h.html#af1ac6ea1a0fcd9587a2acc01c44aefae">FFT_DPU2_t</a> *const _this, <a class="el" href="struct_f_f_t___d_p_u2___input__param__t.html">FFT_DPU2_Input_param_t</a> *const FFT_DPU2_Input_param)</td></tr>
<tr class="separator:aa827a562d3dd1696227af9b1d10fcc1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a246463460f00e961f1f388d136723138" id="r_a246463460f00e961f1f388d136723138"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#a246463460f00e961f1f388d136723138">FFT_DPU2_vtblProcess</a> (<a class="el" href="_i_d_p_u2_8h.html#a28b7a8143eb954781059edc488fd8f54">IDPU2_t</a> *_this, <a class="el" href="em__data__format_8h.html#aad912ddf8bcbd156b91ced740cf047a9">EMData_t</a> in_data, <a class="el" href="em__data__format_8h.html#aad912ddf8bcbd156b91ced740cf047a9">EMData_t</a> out_data)</td></tr>
<tr class="separator:a246463460f00e961f1f388d136723138"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a080aac0133c64ba14fdd1f20e7e9ca02" id="r_a080aac0133c64ba14fdd1f20e7e9ca02"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="_f_f_t___d_p_u2_8c.html#a92343f0b0706d2a94833754a83934c88">FFT_DPU2Class</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_f_t___d_p_u2_8c.html#a080aac0133c64ba14fdd1f20e7e9ca02">sTheClass</a></td></tr>
<tr class="separator:a080aac0133c64ba14fdd1f20e7e9ca02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><br  />
 </p>
<dl class="section author"><dt>Author</dt><dd>SRA - MCD </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>Copyright (c) 2022 STMicroelectronics. All rights reserved.</p>
<p>This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-IS. </p>

<p class="definition">Definition in file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a71c0a557e8b6b414ca7f33219a5afbdf" name="a71c0a557e8b6b414ca7f33219a5afbdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71c0a557e8b6b414ca7f33219a5afbdf">&#9670;&#160;</a></span>FFT_COMPUTE_AVG_SCALE_FACTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FFT_COMPUTE_AVG_SCALE_FACTOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">avg_cnt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fft_len&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(( 2.0f ) / (((float)avg_cnt) * ((float)fft_len)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_f_f_t___d_p_u2_8c_source.html#l00026">26</a> of file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a92343f0b0706d2a94833754a83934c88" name="a92343f0b0706d2a94833754a83934c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92343f0b0706d2a94833754a83934c88">&#9670;&#160;</a></span>FFT_DPU2Class</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___f_f_t___d_p_u2_class.html">_FFT_DPU2Class</a> <a class="el" href="_f_f_t___d_p_u2_8c.html#a92343f0b0706d2a94833754a83934c88">FFT_DPU2Class</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class object declaration. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="affbe2089caee36a68d41d7c135de84d3" name="affbe2089caee36a68d41d7c135de84d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affbe2089caee36a68d41d7c135de84d3">&#9670;&#160;</a></span>FFT_compute_avg_output()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FFT_error_t FFT_compute_avg_output </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_f_f_t___d_p_u2_8h.html#af1ac6ea1a0fcd9587a2acc01c44aefae">FFT_DPU2_t</a> *const&#160;</td>
          <td class="paramname"><em>pObj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get FFT output len</p>
<p>Compute FFT and save the result in temp average output</p>
<p>Sum current FFT result in fft_avg_out</p>
<p>Increment number of computed FFT</p>
<p>Time to perform the average</p>
<p>Compute FFT scale factor</p>
<p>Compute average and store the result in EMData out_data payload</p>
<p>Reset average counter</p>
<p>Clear fft out buffer</p>

<p class="definition">Definition at line <a class="el" href="_f_f_t___d_p_u2_8c_source.html#l00219">219</a> of file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>

</div>
</div>
<a id="a246463460f00e961f1f388d136723138" name="a246463460f00e961f1f388d136723138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a246463460f00e961f1f388d136723138">&#9670;&#160;</a></span>FFT_DPU2_vtblProcess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> FFT_DPU2_vtblProcess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_i_d_p_u2_8h.html#a28b7a8143eb954781059edc488fd8f54">IDPU2_t</a> *&#160;</td>
          <td class="paramname"><em>_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="em__data__format_8h.html#aad912ddf8bcbd156b91ced740cf047a9">EMData_t</a>&#160;</td>
          <td class="paramname"><em>in_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="em__data__format_8h.html#aad912ddf8bcbd156b91ced740cf047a9">EMData_t</a>&#160;</td>
          <td class="paramname"><em>out_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set pointer to in_data p_payload</p>
<p>Get in_data p_payload buffer len</p>
<p>Pass DPU input data to FFT library</p>
<p>Internal FFT input buffer full. Ready to call process function</p>
<p>Compute directly FFT and store the result in EMData out_data payload</p>
<p>FFT Data input buffer not full yet</p>

<p class="definition">Definition at line <a class="el" href="_f_f_t___d_p_u2_8c_source.html#l00169">169</a> of file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>

</div>
</div>
<a id="a3988943b9adad9f35027a5eb9e30d3ba" name="a3988943b9adad9f35027a5eb9e30d3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3988943b9adad9f35027a5eb9e30d3ba">&#9670;&#160;</a></span>FFT_DPU2Alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_i_d_p_u2_8h.html#a28b7a8143eb954781059edc488fd8f54">IDPU2_t</a> * FFT_DPU2Alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>@Brief Allocate an instance of FFT_DPU2.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the interface IDPU2_t or NULL if out of memory error occurs. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_f_f_t___d_p_u2_8c_source.html#l00091">91</a> of file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>

</div>
</div>
<a id="aa827a562d3dd1696227af9b1d10fcc1c" name="aa827a562d3dd1696227af9b1d10fcc1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa827a562d3dd1696227af9b1d10fcc1c">&#9670;&#160;</a></span>FFT_DPU2Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syserror_8h.html#a741625c706792e23dae12c911c4513f9">sys_error_code_t</a> FFT_DPU2Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_f_f_t___d_p_u2_8h.html#af1ac6ea1a0fcd9587a2acc01c44aefae">FFT_DPU2_t</a> *const&#160;</td>
          <td class="paramname"><em>_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_f_t___d_p_u2___input__param__t.html">FFT_DPU2_Input_param_t</a> *const&#160;</td>
          <td class="paramname"><em>FFT_DPU2_Input_param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>@Brief FFTDPU2 Initialization function. </p><pre class="fragment">      This function initializes in_data and out_data EMDData_t
      based on input param: @input_dim and @axis

      Call the base class initialization: ADPU2_Init(ADPU2_t *_this, EMData_t in_data, EMData_t out_data)

      Initialize the FFT library by calling: FFT_Init(FFT_instance_t *instance)
</pre> <dl class="section return"><dt>Returns</dt><dd>a pointer to the interface IDPU2_t or NULL if out of memory error occurs. </dd></dl>
<p>Configure input data buffer</p>
<p>Configure output data buffer</p>
<p>initialize the base class</p>

<p class="definition">Definition at line <a class="el" href="_f_f_t___d_p_u2_8c_source.html#l00103">103</a> of file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a080aac0133c64ba14fdd1f20e7e9ca02" name="a080aac0133c64ba14fdd1f20e7e9ca02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080aac0133c64ba14fdd1f20e7e9ca02">&#9670;&#160;</a></span>sTheClass</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="_f_f_t___d_p_u2_8c.html#a92343f0b0706d2a94833754a83934c88">FFT_DPU2Class</a> sTheClass</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {</div>
<div class="line">        ADPU2_vtblAttachToDataSource,</div>
<div class="line">        ADPU2_vtblDetachFromDataSource,</div>
<div class="line">        ADPU2_vtblAttachToDPU,</div>
<div class="line">        ADPU2_vtblDetachFromDPU,</div>
<div class="line">        ADPU2_vtblDispatchEvents,</div>
<div class="line">        ADPU2_vtblRegisterNotifyCallback,</div>
<div class="line">        <a class="code hl_function" href="_f_f_t___d_p_u2_8c.html#a246463460f00e961f1f388d136723138">FFT_DPU2_vtblProcess</a></div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="a_f_f_t___d_p_u2_8c_html_a246463460f00e961f1f388d136723138"><div class="ttname"><a href="_f_f_t___d_p_u2_8c.html#a246463460f00e961f1f388d136723138">FFT_DPU2_vtblProcess</a></div><div class="ttdeci">sys_error_code_t FFT_DPU2_vtblProcess(IDPU2_t *_this, EMData_t in_data, EMData_t out_data)</div><div class="ttdef"><b>Definition</b> <a href="_f_f_t___d_p_u2_8c_source.html#l00169">FFT_DPU2.c:169</a></div></div>
</div><!-- fragment --><p>The class object. </p>

<p class="definition">Definition at line <a class="el" href="_f_f_t___d_p_u2_8c_source.html#l00047">47</a> of file <a class="el" href="_f_f_t___d_p_u2_8c_source.html">FFT_DPU2.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_7a6499598ddcfcabe96e224cb4a6d834.html">Projects</a></li><li class="navelem"><a class="el" href="dir_786aefb838eb9355651aac920b73a025.html">eLooM_Components</a></li><li class="navelem"><a class="el" href="dir_4f559292eff47ea81e16091c57df1d32.html">DPU</a></li><li class="navelem"><a class="el" href="dir_344a924ec5e3d24fe9de504df850776f.html">Src</a></li><li class="navelem"><a class="el" href="_f_f_t___d_p_u2_8c.html">FFT_DPU2.c</a></li>
    <li class="footer">Generated on Tue Oct 10 2023 14:34:52 for FP-SNS-DATALOG2 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
